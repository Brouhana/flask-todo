{% extends 'layout.html' %}

{% block head %} 
<title>Todo</title>
{% endblock %}

{% block body %} 
<div class="container">

    <div class="row">
        <form class="row float-end mb-4" action="/" method="POST">
            <div class="col-auto">
                <input class="form-control" type="text" name="content" id="content" placeholder="I’m going to&hellip;">
            </div>
            <div class="col-auto pt-2">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" value="1" name="is_important" id="is_important">
                    <label class="form-check-label" for="is_important">Mark as important</label>
                </div>
            </div>
            <div class="col-auto">
                <input class="btn btn-primary" type="submit" value="Add task">
            </div>
        </form>
    </div>
    {% if tasks|length < 1 %}
        {% if error %}
        <div class="alert alert-danger" role="alert">
             You have to write something!
        </div>
        {% else %}
        <div class="card">
            <div class="card-body text-center">
                You’re all caught up!
            </div>
        </div>
        {% endif %}
    {% else %}
    <table class="table">
        <thead>
            <tr>
                <th scope="col">Task</th>
                <th scope="col">Added</th>
                <th scope="col"></th>
            </tr>
        </thead>
        {% for task in tasks %}
        <tr class="align-baseline {{ 'table-warning' if task.is_important }}">
            <td>
                {% if task.is_important %}
                <span class="badge rounded-pill bg-warning text-dark">Important</span>
                {% endif %}
                {{ task.content }}
            </td>
            <td>{{ task.date_created.date() }}</td>
            <td>
                <a href="/complete/{{ task.id }}" class="btn btn-success btn-sm">Complete</a> 
                <a href="/follow-up/{{ task.id }}" class="btn btn-secondary btn-sm">Follow Up</a> 
                <a href="/important/{{ task.id }}" class="btn btn-warning btn-sm">
                    {{ 'Unmark' if task.is_important else 'Mark' }} as important
                </a> 
                <a href="/edit/{{ task.id }}" class="btn btn-link btn-sm">Edit</a>
            </td>
        </tr>
        {% endfor %}
    </table>
    {% endif %}
</div>
{% endblock %}